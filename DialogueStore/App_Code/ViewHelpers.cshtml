@using DialogueStore.Infrastructure

@helper PageHeader(string title) {
    <h2 class="page-header">@title</h2>
}

@helper PageHeader(string title, string subtitle) {
    <h2 class="page-header">@title <small>@subtitle</small></h2>
}

@functions
{
    public static DialogueStoreSettings GetAppSettings()
    {
        return (DialogueStoreSettings)HttpContext.Current.Application["AppSettings"];
    }
    
    public static string ApplicationVersion() {
        return System.Configuration.ConfigurationManager.AppSettings["abufm.app-version"].ToLowerInvariant();
    }

    public static string HighlightStockItem(DialogueStore.Models.Stock item) {
        if (item.IsParent) {
            return "success";
        }

        return item.IsExpired ? "warning" : string.Empty;
    }

    public static int GetExpiredItemCount(IEnumerable<DialogueStore.Models.Stock> items) {
        return items == null ? 0 : items.Count(z => z.IsExpired);
    }
}

@helper Html5Shim() {
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
}

@helper ShowExpiredItemsWarninig() {
    int expiredItemsCount = GetExpiredItemCount(Model);
    if (expiredItemsCount > 0) {
    <div class="row">
        <div class="alert alert-danger alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <strong>Warning!</strong> there are @expiredItemsCount stock items that have expired.
        </div>
    </div>
    }
}